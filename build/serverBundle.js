(()=>{var e={774:(e,t,r)=>{var n=r(185),a=n.Schema,o=n.model,i=new a({title:{type:String,unique:!0,requred:!0},description:String,author:String,authorId:String,state:{type:String,default:"draft",enum:["published","draft"]},tags:{type:String,default:""},read_count:{type:Number,default:0},reading_time:String,body:{type:String,required:!0}},{timestamps:!0});e.exports=o("Blog",i)},746:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function i(e,t,r){i.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function s(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=void 0===e?"undefined":O(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,r,l,p,f,d){d=d||[];var g=(p=p||[]).slice(0);if(void 0!==f){if(l){if("function"==typeof l&&l(g,f))return;if("object"===(void 0===l?"undefined":O(l))){if(l.prefilter&&l.prefilter(g,f))return;if(l.normalize){var h=l.normalize(g,f,e,t);h&&(e=h[0],t=h[1])}}}g.push(f)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":O(e),v=void 0===t?"undefined":O(t),b="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(f),y="undefined"!==v||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(f);if(!b&&y)r(new a(g,t));else if(!y&&b)r(new o(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if("date"===u(e)&&e-t!=0)r(new n(g,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&r(new n(g,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?r(new i(g,w,new o(void 0,e[w]))):c(e[w],t[w],r,l,g,w,d);for(;w<t.length;)r(new i(g,w,new a(void 0,t[w++])))}else{var E=Object.keys(e),x=Object.keys(t);E.forEach((function(n,a){var o=x.indexOf(n);o>=0?(c(e[n],t[n],r,l,g,n,d),x=s(x,o)):c(e[n],void 0,r,l,g,n,d)})),x.forEach((function(e){c(void 0,t[e],r,l,g,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function l(e,t,r,n){return n=n||[],c(e,t,(function(e){e&&n.push(e)}),r),n.length?n:void 0}function p(e,t,r){if(r.path&&r.path.length){var n,a=e[t],o=r.path.length-1;for(n=0;n<o;n++)a=a[r.path[n]];switch(r.kind){case"A":p(a[r.path[n]],r.index,r.item);break;case"D":delete a[r.path[n]];break;case"E":case"N":a[r.path[n]]=r.rhs}}else switch(r.kind){case"A":p(e[t],r.index,r.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,a=-1,o=r.path?r.path.length-1:0;++a<o;)void 0===n[r.path[a]]&&(n[r.path[a]]="number"==typeof r.path[a]?[]:{}),n=n[r.path[a]];switch(r.kind){case"A":p(r.path?n[r.path[a]]:n,r.index,r.item);break;case"D":delete n[r.path[a]];break;case"E":case"N":n[r.path[a]]=r.rhs}}}function d(e,t,r){if(r.path&&r.path.length){var n,a=e[t],o=r.path.length-1;for(n=0;n<o;n++)a=a[r.path[n]];switch(r.kind){case"A":d(a[r.path[n]],r.index,r.item);break;case"D":case"E":a[r.path[n]]=r.lhs;break;case"N":delete a[r.path[n]]}}else switch(r.kind){case"A":d(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=s(e,t)}return e}function g(e){return"color: "+_[e].color+"; font-weight: bold"}function h(e,t,r,n){var a=l(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}a?a.forEach((function(e){var t=e.kind,n=function(e){var t=e.kind,r=e.path,n=e.lhs,a=e.rhs,o=e.index,i=e.item;switch(t){case"E":return[r.join("."),n,"→",a];case"N":return[r.join("."),a];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+o+"]",i];default:return[]}}(e);r.log.apply(r,["%c "+_[t].text,g(t)].concat(S(n)))})):r.log("—— no diff ——");try{r.groupEnd()}catch(e){r.log("—— diff end —— ")}}function m(e,t,r,n){switch(void 0===e?"undefined":O(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,S(r)):e[n];case"function":return e(t);default:return e}}function v(e,t){var r=t.logger,n=t.actionTransformer,a=t.titleFormatter,o=void 0===a?function(e){var t=e.timestamp,r=e.duration;return function(e,n,a){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+n),r&&o.push("%c(in "+a.toFixed(2)+" ms)"),o.join(" ")}}(t):a,i=t.collapsed,s=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach((function(a,p){var f=a.started,d=a.startedTime,g=a.action,v=a.prevState,b=a.error,y=a.took,w=a.nextState,E=e[p+1];E&&(w=E.prevState,y=E.started-f);var j=n(g),O="function"==typeof i?i((function(){return w}),g,a):i,S=x(d),k=s.title?"color: "+s.title(j)+";":"",_=["color: gray; font-weight: lighter;"];_.push(k),t.timestamp&&_.push("color: gray; font-weight: lighter;"),t.duration&&_.push("color: gray; font-weight: lighter;");var P=o(j,S,y);try{O?s.title&&l?r.groupCollapsed.apply(r,["%c "+P].concat(_)):r.groupCollapsed(P):s.title&&l?r.group.apply(r,["%c "+P].concat(_)):r.group(P)}catch(e){r.log(P)}var A=m(u,j,[v],"prevState"),D=m(u,j,[j],"action"),q=m(u,j,[b,v],"error"),T=m(u,j,[w],"nextState");if(A)if(s.prevState){var I="color: "+s.prevState(v)+"; font-weight: bold";r[A]("%c prev state",I,v)}else r[A]("prev state",v);if(D)if(s.action){var B="color: "+s.action(j)+"; font-weight: bold";r[D]("%c action    ",B,j)}else r[D]("action    ",j);if(b&&q)if(s.error){var L="color: "+s.error(b,v)+"; font-weight: bold;";r[q]("%c error     ",L,b)}else r[q]("error     ",b);if(T)if(s.nextState){var N="color: "+s.nextState(w)+"; font-weight: bold";r[T]("%c next state",N,w)}else r[T]("next state",w);c&&h(v,w,r,O);try{r.groupEnd()}catch(e){r.log("—— log end ——")}}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},P,e),r=t.logger,n=t.stateTransformer,a=t.errorTransformer,o=t.predicate,i=t.logErrors,s=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(c){if("function"==typeof o&&!o(r,c))return e(c);var l={};u.push(l),l.started=j.now(),l.startedTime=new Date,l.prevState=n(r()),l.action=c;var p=void 0;if(i)try{p=e(c)}catch(e){l.error=a(e)}else p=e(c);l.took=j.now()-l.started,l.nextState=n(r());var f=t.diff&&"function"==typeof s?s(r,c):t.diff;if(v(u,Object.assign({},t,{diff:f})),u.length=0,l.error)throw l.error;return p}}}}var y,w,E=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},x=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},j="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},k=[];y="object"===("undefined"==typeof global?"undefined":O(global))&&global?global:"undefined"!=typeof window?window:{},(w=y.DeepDiff)&&k.push((function(){void 0!==w&&y.DeepDiff===l&&(y.DeepDiff=w,w=void 0)})),t(n,r),t(a,r),t(o,r),t(i,r),Object.defineProperties(l,{diff:{value:l,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(e,t,r){e&&t&&c(e,t,(function(n){r&&!r(e,t,n)||f(e,t,n)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,a,o=e;for(a=r.path.length-1,n=0;n<a;n++)void 0===o[r.path[n]]&&(o[r.path[n]]={}),o=o[r.path[n]];switch(r.kind){case"A":d(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==w},enumerable:!0},noConflict:{value:function(){return k&&(k.forEach((function(e){e()})),k=null),l},enumerable:!0}});var _={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},P={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?b()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=P,e.createLogger=b,e.logger=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},96:e=>{"use strict";e.exports=require("bcrypt")},185:e=>{"use strict";e.exports=require("mongoose")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("dotenv"),t=require("express");var n=r.n(t);const a=require("express-session");var o=r.n(a);const i=require("express-rate-limit");var s=r.n(i);const u=require("react");var c=r.n(u);const l=require("react-router-config");(0,e.config)();const p={port:process.env.PORT||3e3,mongoUrl:process.env.MONGO_URL||"mongodb://localhost:27017/blogApi"},f=require("@babel/runtime/helpers/asyncToGenerator");var d=r.n(f);const g=require("@babel/runtime/regenerator");var h=r.n(g),m=r(185),v=r.n(m);const b=require("winston");var y=r.n(b);const w=y().createLogger({levels:y().config.npm.levels,transports:[new(y().transports.File)({level:"info",filename:"./logs/app.log",handleExceptions:!0,json:!0,maxSize:5242880,maxFiles:5,colorize:!1}),new(y().transports.Console)({level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1}),E=function(){var e=d()(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v().connect(t||"mongodb://localhost:27017");case 3:e.sent,w.info("  Database connection was successfully established"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=require("passport");var j=r.n(x);const O=require("passport-local");var S=r(185),k=S.Schema,_=S.model,P=r(96),A=P.hash,D=P.compare,q=new k({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0}});q.pre("save",function(){var e=d()(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(this.password,10);case 2:r=e.sent,this.password=r,t();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),q.methods.verifyPassword=function(){var e=d()(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,this.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();const T=_("User",q),I=require("passport-jwt"),B=require("morgan");var L=r.n(B);const N=require("morgan-json");var C=r.n(N)()({method:":method",url:":url",status:":status",contentLength:":res[content-length]",responseTime:":response-time"});const R=L()(C,{stream:{write:function(e){var t=JSON.parse(e),r=t.method,n=t.url,a=t.status,o=t.contentLength,i=t.responseTime;w.info("HTTP Access Log",{timestamp:(new Date).toString(),method:r,url:n,status:Number(a),contentLength:o,responseTime:Number(i)})}}}),F=require("react-dom/server"),M=require("react-router-dom"),U=require("react-redux"),G=require("serialize-javascript");var H=r.n(G);const z=require("@babel/runtime/helpers/defineProperty");var J=r.n(z);const W=function(){return c().createElement("nav",null,c().createElement("h4",null,"Blog API")," ",c().createElement("ul",null," ",c().createElement("li",null,c().createElement(M.Link,{to:"/"},"Home"))," ",c().createElement("li",null,c().createElement(M.Link,{to:"/pages/blogs"},"Blogs"))," ",c().createElement("li",null,c().createElement(M.Link,{to:"/pages/signup"},"Signup"))," ",c().createElement("li",null,c().createElement(M.Link,{to:"/pages/login"},"Login"))," ",c().createElement("li",null,c().createElement(M.Link,{to:"/pages/new-blog"},"Add Blog"))," ")," ")},Y=function(){return c().createElement("footer",null,c().createElement("p",null,"App Made With Love By darkcode__"))},$={component:function(e){var t=e.route;return c().createElement("div",null,c().createElement(W,null),(0,l.renderRoutes)(t.routes),c().createElement(Y,null))}};var K={component:function(){return c().createElement("section",{id:"home-section"},c().createElement("h2",null,"Welcome To The Blog API Project"),c().createElement("ul",null,c().createElement("li",null,c().createElement(M.Link,{to:"/pages/login"},"Login or register to post new blog")),c().createElement("li",null,c().createElement(M.Link,{to:"/pages/blogs"},"View all published blogs")))," ")},loadData:function(){console.log("Hello From The Home Page")}};const Z=require("@babel/runtime/helpers/slicedToArray");var Q=r.n(Z);const V=require("axios");var X=r.n(V),ee="SIGN_UP_USER",te="LOGIN_USER";function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){J()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ae={component:function(){var e=(0,u.useState)({first_name:"",last_name:"",email:"",password:""}),t=Q()(e,2),r=t[0],n=t[1],a=(0,M.useHistory)(),o=(0,U.useDispatch)(),i=function(e){var t=e.target,r=t.name,a=t.value;n((function(e){return ne(ne({},e),{},J()({},r,a))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Register To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),o((t=r,function(){var e=d()(h().mark((function e(r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X().post("http://localhost:4040/api/auth/signup",t);case 3:n=e.sent,a=n.data,r({type:ee,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),n({first_name:"",last_name:"",email:"",password:""}),a.push("/")}},c().createElement("div",null,c().createElement("input",{id:"first_name",placeholder:"Enter Your First Name",name:"first_name",onChange:i,value:r.first_name})),c().createElement("div",null,c().createElement("input",{id:"last_name",placeholder:"Enter Your Last Name",name:"last_name",onChange:i,value:r.last_name})),c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",onChange:i,value:r.email})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:i})),c().createElement("button",{type:"submit"},"Register")))},loadData:function(){console.log("Hello From The Signup Page.")}};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){J()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const se={component:function(){var e=(0,u.useState)({email:"",password:""}),t=Q()(e,2),r=t[0],n=t[1],a=(0,M.useHistory)(),o=(0,U.useDispatch)(),i=function(e){var t=e.target,r=t.name,a=t.value;n((function(e){return ie(ie({},e),{},J()({},r,a))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Login To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),o((t=r,function(){var e=d()(h().mark((function e(r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X().post("http://localhost:4040/api/auth/login",t);case 3:n=e.sent,a=n.data,console.log("Login User Action: ",a),r({type:te,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),n({email:"",password:""}),a.push("/")}},c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",value:r.email,onChange:i})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:i})),c().createElement("button",{type:"submit"},"Login")))},loadData:function(){console.log("Hello From The Login Page")}};var ue="GET_ALL_BLOGS",ce="GET_SINGLE_BLOG",le="POST_A_BLOG",pe=function(){return function(){var e=d()(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X().get("http://localhost:4040/api/blogs");case 3:r=e.sent,n=r.data,t((a=n.results,{type:ue,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var a}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},fe=function(e){return function(){var t=d()(h().mark((function t(r){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X().get("http://localhost:4040/api/blogs/".concat(e));case 3:n=t.sent,a=n.data,r({type:ce,payload:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};function de(e){return new Date(e).toLocaleDateString("US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}const ge={component:function(){var e=(0,U.useDispatch)();(0,u.useEffect)((function(){e(pe())}),[]);var t=(0,U.useSelector)((function(e){return e})).blogs;return c().createElement("div",{id:"blogs-main"},c().createElement("h2",null,"All Published Blogs"),c().createElement("ul",null,t.reverse().map((function(e){return c().createElement("li",{key:e._id},c().createElement("h4",null,e.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,de(e.createdAt)),c().createElement("span",null,e.author)),c().createElement("p",null,e.description),c().createElement(M.Link,{to:"/pages/blogs/".concat(e._id)},"Read More..."))}))))},loadData:function(e){e.dispatch(pe())}},he={component:function(){var e=(0,M.useParams)().blogId,t=(0,U.useDispatch)();(0,u.useEffect)((function(){t(fe(e))}),[]);var r=(0,U.useSelector)((function(e){return e})).blog;return c().createElement("div",{id:"blog-main"},c().createElement("h4",null,r.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,de(r.createdAt)),c().createElement("span",null,r.author)),c().createElement("p",null,r.description),c().createElement("p",null,r.body))},loadData:function(e,t){e.dispatch(fe(t))}},me=require("@babel/runtime/helpers/extends");var ve=r.n(me);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){J()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const we={component:(Ee=function(e){var t=(0,U.useDispatch)(),r=(0,u.useState)({title:"",description:"",tags:"",body:"",author:""}),n=Q()(r,2),a=n[0],o=n[1],i=function(e){var t=e.target,r=t.name,n=t.value;o((function(e){return ye(ye({},e),{},J()({},r,n))}))};return c().createElement("div",{id:"newblog-main"},c().createElement("h2",null,"Post A New Blog"),c().createElement("form",{onSubmit:function(r){var n,i;r.preventDefault(),t((n=a,i=e.token,function(){var e=d()(h().mark((function e(t){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X().post("http://localhost:4040/api/blogs/?blog_token=".concat(i),n);case 3:r=e.sent,a=r.data,t({type:le,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),o({title:"",description:"",tags:"",body:"",author:""})}},c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Title",name:"title",required:!0,value:a.title,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Description",name:"description",required:!0,value:a.description,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter The Name Of The Author If Not You",name:"author",value:a.author,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter A Comma Separated Blog Tags If Any",name:"tags",value:a.tags,onChange:i})),c().createElement("div",{className:"textarea"},c().createElement("textarea",{placeholder:"Blog Entries here",name:"body",required:!0,value:a.body,onChange:i})),c().createElement("button",{type:"submit"},"Add Blog")))},function(e){var t=(0,U.useSelector)((function(e){return e})).user.token;return t?c().createElement(Ee,ve()({token:t},e)):c().createElement(M.Redirect,{to:"/pages/login"})})};var Ee;const xe={component:function(e){var t=e.staticContext,r=void 0===t?{}:t;return r.notFound=!0,console.log("Not found page: ".concat(JSON.stringify(r))),c().createElement("div",{id:"notFound-main"},c().createElement("h2",null,"404"),c().createElement("p",null,"Sorry, page not found."),c().createElement(M.Link,{to:"/"},"Back Home"))}};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){J()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=[Oe(Oe({},$),{},{routes:[Oe({path:"/",exact:!0},K),Oe({path:"/pages/signup"},ae),Oe({path:"/pages/login"},se),Oe(Oe({path:"/pages/blogs"},ge),{},{exact:!0}),Oe(Oe({path:"/pages/new-blog"},we),{},{exact:!0}),Oe({path:"/pages/blogs/:blogId"},he),Oe({},xe)]})];const ke=require("jsonwebtoken");var _e=function(e,t){var r={_id:e.user._id,email:e.user.email,last_name:e.user.last_name,first_name:e.user.first_name},n=(0,ke.sign)(r,process.env.JWT_SECRET,{expiresIn:"1h"});return t.status(201).json({loggedIn:!0,profile:r,token:n})},Pe=function(e,t,r){var n=r.err,a=r.user;if(r.info,n)return w.info(n),t.status(500).json(n);e.login(a,{session:!0},function(){var r=d()(h().mark((function r(n){var o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return log(n),r.abrupt("return",t.status(500).json(n));case 3:return o={_id:e.user._id,email:a.email,last_name:a.last_name,first_name:a.first_name},i=(0,ke.sign)(o,process.env.JWT_SECRET,{expiresIn:"1h"}),r.abrupt("return",t.status(200).json({loggedIn:!0,profile:o,token:i}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())};const Ae=require("joi");var De=r.n(Ae),qe=De().object({first_name:De().string().min(2).required(),last_name:De().string().min(2).required(),email:De().string().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),password:De().string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),Te=function(){var e=d()(h().mark((function e(t,r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.validateAsync(t.body);case 3:a=e.sent,w.info(a),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),w.info(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ie=_e,Be=Pe;const Le=require("paginate-middleware");var Ne=r.n(Le),Ce=r(774),Re=r.n(Ce);function Fe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ue,Ge,He,ze,Je,We,Ye,$e={getAllPublishedBlogs:(Je=d()(h().mark((function e(t,r){var n,a,o,i,s,u,c,l,p,f,d,g,m,v,b,y,E,x,j,O;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t.query,a=n.page,o=void 0===a?1:a,i=n.limit,s=void 0===i?10:i,u=n.author,c=n.title,l=n.tags,p=n.order_by,f=void 0===p?"created_at":p,d=n.order,g=void 0===d?"asc":d,m={state:"published"},u&&(m.author=u),c&&(m.title=c),l&&(m.tags={$regex:l}),v={},b=f.split(","),y=Fe(b);try{for(y.s();!(E=y.n()).done;)x=E.value,"asc"===g&&(v[x]=1),"desc"===g&&(v[x]=-1)}catch(e){y.e(e)}finally{y.f()}return e.next=12,Re().find(m).sort(v);case 12:return j=e.sent,O=Ne()(j,+o,+s),e.abrupt("return",r.status(200).json(O));case 17:return e.prev=17,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),function(e,t){return Je.apply(this,arguments)}),postBlog:(ze=d()(h().mark((function e(t,r){var n,a,o,i,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,a=n.title,o=n.description,i=n.tags,s=n.body,e.next=4,Re().create({title:a,description:o,author:t.body.author||t.user.first_name+" "+t.user.last_name,authorId:t.user._id,reading_time:"\n            ".concat(Math.ceil(s.length/265)>1?Math.ceil(s.length/265)+"Mins":Math.ceil(s.length/265)+"Min"),tags:i,body:s});case 4:return u=e.sent,e.abrupt("return",r.status(201).json(u));case 8:return e.prev=8,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e,t){return ze.apply(this,arguments)}),getSingleBlog:(He=d()(h().mark((function e(t,r){var n,a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Re().findOne({_id:n,state:"published"});case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 7:return a.read_count+=1,e.next=10,a.save();case 10:return e.next=12,T.findById(a.authorId);case 12:return delete(o=(o=e.sent).toJSON()).password,(i=a.toJSON()).infos={},i.infos.author=o,e.abrupt("return",r.status(200).json(i));case 21:return e.prev=21,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))),function(e,t){return He.apply(this,arguments)}),updateBlog:(Ge=d()(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Re().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Re().updateOne({_id:n},t.body);case 8:return a=e.sent,e.abrupt("return",r.status(200).json({updateInfo:a,message:"Blog updated successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only update your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Ge.apply(this,arguments)}),deleteBlog:(Ue=d()(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Re().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Re().deleteOne({_id:n});case 8:return a=e.sent,e.abrupt("return",r.status(200).json({deleteInfo:a,message:"Blog Deleted successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only delete your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Ue.apply(this,arguments)})},Ke=De().object({title:De().string().min(5).max(255).required(),description:De().string(),author:De().string().optional(),authorId:De().string().optional(),state:De().string().default("draft"),tags:De().string().default(""),read_count:De().number().default(0),reading_time:De().string(),body:De().string().required()}),Ze=function(){var e=d()(h().mark((function e(t,r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.validateAsync(t.body);case 3:a=e.sent,w.info(a),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),w.error(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Qe=$e.getAllPublishedBlogs,Ve=$e.postBlog,Xe=$e.getSingleBlog,et=$e.updateBlog,tt=$e.deleteBlog,rt={getAuthorBlogs:(Ye=d()(h().mark((function e(t,r){var n,a,o,i,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.user._id!==t.params.authorId){e.next=12;break}return n=t.query,a=n.page,o=void 0===a?1:a,i=n.limit,s=void 0===i?10:i,u={authorId:t.user._id},t.query.state&&(u.state=t.query.state),e.next=7,Re().find(u);case 7:return c=e.sent,l=Ne()(c,+o,+s),e.abrupt("return",r.status(200).json(l));case 12:return e.abrupt("return",r.status(403).json({message:"Can only view your own list of published and draft blogs"}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Ye.apply(this,arguments)}),getAuthorBlog:(We=d()(h().mark((function e(t,r){var n,a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params,a=n.authorId,o=n.blogId,e.prev=1,a!==t.user._id){e.next=9;break}return e.next=5,Re().findOne({_id:o,authorId:a});case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 8:return e.abrupt("return",r.status(200).json(i));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),w.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return We.apply(this,arguments)})},nt=rt.getAuthorBlogs,at=rt.getAuthorBlog;const ot=require("redux");r(746);const it=require("redux-thunk");var st=r.n(it);const ut=require("redux-persist"),ct=require("redux-persist/lib/storage/createWebStorage");var lt=r.n(ct);const pt=require("@babel/runtime/helpers/toConsumableArray");var ft=r.n(pt),dt=(st(),"undefined"!=typeof window?lt()("local"):{getItem:function(e){return Promise.resolve(null)},setItem:function(e,t){return Promise.resolve(t)},removeItem:function(e){return Promise.resolve()}}),gt=(0,ot.combineReducers)({blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return t.payload;case le:return[].concat(ft()(e),[t.payload]);default:return e}},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===ce?t.payload:e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:case te:return t.payload;default:return e}}}),ht={key:"root",storage:dt,whitelist:["user"]},mt=((0,ut.persistReducer)(ht,gt),[st()]);(0,e.config)();var vt=n()();E(p.mongoUrl),vt.use(n().urlencoded({extended:!0})),vt.use(n().json()),vt.use(n().static("public")),vt.use(R),vt.use(o()({secret:process.env.SESSION_SECRET,resave:!1,saveUninitialized:!1,cookie:{maxAge:216e3}})),function(e){var t;e.use(j().initialize()),e.use(j().session()),j().use("login",new O.Strategy({usernameField:"email",passwordField:"password"},function(){var e=d()(h().mark((function e(t,r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.findOne({email:t});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",n(null,!1,{message:"User Not Found!"}));case 6:if(a.verifyPassword(r)){e.next=8;break}return e.abrupt("return",n(null,!1,{message:"Incorrect Password"}));case 8:return e.abrupt("return",n(null,a,{message:"User Logged in successfully."}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",n(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}())),j().use("signup",new O.Strategy({usernameField:"email",passReqToCallback:!0},function(){var e=d()(h().mark((function e(t,r,n,a){var o,i,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=t.body,i=o.first_name,s=o.last_name,/(\w+)\@(\w+)\.[a-zA-Z]/g.test(r)){e.next=5;break}throw new Error("Please enter a valid email address.");case 5:return e.next=7,T.create({email:r.toLowerCase(),first_name:i,last_name:s,password:n});case 7:u=e.sent,a(null,u),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),w.info(e.t0),a(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}())),t={secretOrKey:process.env.JWT_SECRET,jwtFromRequest:I.ExtractJwt.fromUrlQueryParameter("blog_token")},j().use(new I.Strategy(t,(function(e,t){try{return w.info("JWT STRATEGY: ",e),t(null,e)}catch(e){return w.info("JWT Error: => ",e),t(e)}}))),j().serializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))})),j().deserializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))}))}(vt);var bt,yt,wt,Et=s()({windowMs:6e4,max:100,standardHeaders:!0,legacyHeaders:!1,message:"Too many requests, please try again later.",statusCode:429});vt.use("/api",Et),vt.use("/api/auth",((bt=(0,t.Router)()).route("/signup").post(Te,j().authenticate("signup",{session:!1}),Ie),bt.route("/login").post(function(){var e=d()(h().mark((function e(t,r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j().authenticate("login",(function(e,n,a){Be(t,r,{err:e,user:n,info:a})}))(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),bt)),vt.use("/api/blogs",((yt=(0,t.Router)()).route("/").get(Qe).post(Ze,j().authenticate("jwt",{session:!1}),Ve),yt.route("/:blogId").get(Xe).patch(j().authenticate("jwt",{session:!1}),et).delete(j().authenticate("jwt",{session:!1}),tt),yt)),vt.use("/api/authors",((wt=(0,t.Router)()).route("/:authorId/blogs").get(j().authenticate("jwt",{session:!1}),nt),wt.route("/:authorId/blogs/:blogId").get(j().authenticate("jwt",{session:!1}),at),wt)),vt.get("*",(function(e,t){var r=(0,ot.createStore)(gt,ot.applyMiddleware.apply(void 0,mt)),n=(0,l.matchRoutes)(Se,e.path).map((function(t){var n=t.route;return n.loadData?n.loadData(r,e.path.split("/")[3]):null})).map((function(e){if(e)return new Promise((function(t,r){e.then(t).catch(t)}))}));Promise.all(n).then((function(){var n={};w.info("Server Root App Store Get State: ",r.getState());var a=function(e,t,r){var n=(0,F.renderToString)(c().createElement(U.Provider,{store:t},c().createElement(M.StaticRouter,{location:e.url,context:r},c().createElement("div",null,(0,l.renderRoutes)(Se)))));return'\n  <!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="stylesheet" href="/styles.css">\n\n  </head>\n  <body>\n    <div id="root">'.concat(n,"</div>\n\n\n    \n    <script>\n   window.INITIAL_STATE = ").concat(H()(t.getState()),'\n<\/script>\n    <script src="/viewsBundle.js"><\/script>\n  </body>\n</html>\n')}(e,r,n);return n.url?t.redirect(301,n.url):(n.notFound&&t.status(404),t.send(a))}))})),vt.listen(p.port,(function(){return w.info("Server is Running on port "+p.port)}))})()})();
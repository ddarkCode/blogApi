(()=>{var e={774:(e,t,r)=>{var n=r(185),o=n.Schema,a=n.model,i=new o({title:{type:String,unique:!0,requred:!0},description:String,author:String,authorId:String,state:{type:String,default:"draft",enum:["published","draft"]},tags:{type:String,default:""},read_count:{type:Number,default:0},reading_time:String,body:{type:String,required:!0}},{timestamps:!0});e.exports=a("Blog",i)},846:(e,t,r)=>{!function(){"use strict";var t=r(965),n=r(561),o={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function a(e){return"string"==typeof e||e instanceof String}function i(e,t){if(Array.isArray(t)){for(var r=0;r<t.length;++r)if(i(e,t[r]))return!0;return!1}return a(t)?e===t:t instanceof RegExp?t.test(e):!!t}function s(e,t){var r,n=t.headers.origin,o=[];return e.origin&&"*"!==e.origin?a(e.origin)?(o.push([{key:"Access-Control-Allow-Origin",value:e.origin}]),o.push([{key:"Vary",value:"Origin"}])):(r=i(n,e.origin),o.push([{key:"Access-Control-Allow-Origin",value:!!r&&n}]),o.push([{key:"Vary",value:"Origin"}])):o.push([{key:"Access-Control-Allow-Origin",value:"*"}]),o}function u(e){return!0===e.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function c(e){var t=e.exposedHeaders;return t?(t.join&&(t=t.join(",")),t&&t.length?{key:"Access-Control-Expose-Headers",value:t}:null):null}function l(e,t){for(var r=0,o=e.length;r<o;r++){var a=e[r];a&&(Array.isArray(a)?l(a,t):"Vary"===a.key&&a.value?n(t,a.value):a.value&&t.setHeader(a.key,a.value))}}e.exports=function(e){var r=null;return r="function"==typeof e?e:function(t,r){r(null,e)},function(e,n,a){r(e,(function(r,i){if(r)a(r);else{var p=t({},o,i),f=null;p.origin&&"function"==typeof p.origin?f=p.origin:p.origin&&(f=function(e,t){t(null,p.origin)}),f?f(e.headers.origin,(function(t,r){t||!r?a(t):(p.origin=r,function(e,t,r,n){var o=[];"OPTIONS"===(t.method&&t.method.toUpperCase&&t.method.toUpperCase())?(o.push(s(e,t)),o.push(u(e)),o.push(function(e){var t=e.methods;return t.join&&(t=e.methods.join(",")),{key:"Access-Control-Allow-Methods",value:t}}(e)),o.push(function(e,t){var r=e.allowedHeaders||e.headers,n=[];return r?r.join&&(r=r.join(",")):(r=t.headers["access-control-request-headers"],n.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),r&&r.length&&n.push([{key:"Access-Control-Allow-Headers",value:r}]),n}(e,t)),o.push(function(e){var t=("number"==typeof e.maxAge||e.maxAge)&&e.maxAge.toString();return t&&t.length?{key:"Access-Control-Max-Age",value:t}:null}(e)),o.push(c(e)),l(o,r),e.preflightContinue?n():(r.statusCode=e.optionsSuccessStatus,r.setHeader("Content-Length","0"),r.end())):(o.push(s(e,t)),o.push(u(e)),o.push(c(e)),l(o,r),n())}(p,e,n,a))})):a()}}))}}}()},746:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function i(e,t,r){i.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function s(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=void 0===e?"undefined":O(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,r,l,p,f,d){d=d||[];var g=(p=p||[]).slice(0);if(void 0!==f){if(l){if("function"==typeof l&&l(g,f))return;if("object"===(void 0===l?"undefined":O(l))){if(l.prefilter&&l.prefilter(g,f))return;if(l.normalize){var h=l.normalize(g,f,e,t);h&&(e=h[0],t=h[1])}}}g.push(f)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":O(e),v=void 0===t?"undefined":O(t),b="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(f),y="undefined"!==v||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(f);if(!b&&y)r(new o(g,t));else if(!y&&b)r(new a(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if("date"===u(e)&&e-t!=0)r(new n(g,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&r(new n(g,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?r(new i(g,w,new a(void 0,e[w]))):c(e[w],t[w],r,l,g,w,d);for(;w<t.length;)r(new i(g,w,new o(void 0,t[w++])))}else{var E=Object.keys(e),x=Object.keys(t);E.forEach((function(n,o){var a=x.indexOf(n);a>=0?(c(e[n],t[n],r,l,g,n,d),x=s(x,a)):c(e[n],void 0,r,l,g,n,d)})),x.forEach((function(e){c(void 0,t[e],r,l,g,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function l(e,t,r,n){return n=n||[],c(e,t,(function(e){e&&n.push(e)}),r),n.length?n:void 0}function p(e,t,r){if(r.path&&r.path.length){var n,o=e[t],a=r.path.length-1;for(n=0;n<a;n++)o=o[r.path[n]];switch(r.kind){case"A":p(o[r.path[n]],r.index,r.item);break;case"D":delete o[r.path[n]];break;case"E":case"N":o[r.path[n]]=r.rhs}}else switch(r.kind){case"A":p(e[t],r.index,r.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,a=r.path?r.path.length-1:0;++o<a;)void 0===n[r.path[o]]&&(n[r.path[o]]="number"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case"A":p(r.path?n[r.path[o]]:n,r.index,r.item);break;case"D":delete n[r.path[o]];break;case"E":case"N":n[r.path[o]]=r.rhs}}}function d(e,t,r){if(r.path&&r.path.length){var n,o=e[t],a=r.path.length-1;for(n=0;n<a;n++)o=o[r.path[n]];switch(r.kind){case"A":d(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}else switch(r.kind){case"A":d(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=s(e,t)}return e}function g(e){return"color: "+A[e].color+"; font-weight: bold"}function h(e,t,r,n){var o=l(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}o?o.forEach((function(e){var t=e.kind,n=function(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,a=e.index,i=e.item;switch(t){case"E":return[r.join("."),n,"→",o];case"N":return[r.join("."),o];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+a+"]",i];default:return[]}}(e);r.log.apply(r,["%c "+A[t].text,g(t)].concat(S(n)))})):r.log("—— no diff ——");try{r.groupEnd()}catch(e){r.log("—— diff end —— ")}}function m(e,t,r,n){switch(void 0===e?"undefined":O(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,S(r)):e[n];case"function":return e(t);default:return e}}function v(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,a=void 0===o?function(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+n),r&&a.push("%c(in "+o.toFixed(2)+" ms)"),a.join(" ")}}(t):o,i=t.collapsed,s=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach((function(o,p){var f=o.started,d=o.startedTime,g=o.action,v=o.prevState,b=o.error,y=o.took,w=o.nextState,E=e[p+1];E&&(w=E.prevState,y=E.started-f);var j=n(g),O="function"==typeof i?i((function(){return w}),g,o):i,S=x(d),k=s.title?"color: "+s.title(j)+";":"",A=["color: gray; font-weight: lighter;"];A.push(k),t.timestamp&&A.push("color: gray; font-weight: lighter;"),t.duration&&A.push("color: gray; font-weight: lighter;");var P=a(j,S,y);try{O?s.title&&l?r.groupCollapsed.apply(r,["%c "+P].concat(A)):r.groupCollapsed(P):s.title&&l?r.group.apply(r,["%c "+P].concat(A)):r.group(P)}catch(e){r.log(P)}var _=m(u,j,[v],"prevState"),D=m(u,j,[j],"action"),q=m(u,j,[b,v],"error"),T=m(u,j,[w],"nextState");if(_)if(s.prevState){var C="color: "+s.prevState(v)+"; font-weight: bold";r[_]("%c prev state",C,v)}else r[_]("prev state",v);if(D)if(s.action){var I="color: "+s.action(j)+"; font-weight: bold";r[D]("%c action    ",I,j)}else r[D]("action    ",j);if(b&&q)if(s.error){var L="color: "+s.error(b,v)+"; font-weight: bold;";r[q]("%c error     ",L,b)}else r[q]("error     ",b);if(T)if(s.nextState){var B="color: "+s.nextState(w)+"; font-weight: bold";r[T]("%c next state",B,w)}else r[T]("next state",w);c&&h(v,w,r,O);try{r.groupEnd()}catch(e){r.log("—— log end ——")}}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},P,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,a=t.predicate,i=t.logErrors,s=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(r,c))return e(c);var l={};u.push(l),l.started=j.now(),l.startedTime=new Date,l.prevState=n(r()),l.action=c;var p=void 0;if(i)try{p=e(c)}catch(e){l.error=o(e)}else p=e(c);l.took=j.now()-l.started,l.nextState=n(r());var f=t.diff&&"function"==typeof s?s(r,c):t.diff;if(v(u,Object.assign({},t,{diff:f})),u.length=0,l.error)throw l.error;return p}}}}var y,w,E=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},x=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},j="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},k=[];y="object"===("undefined"==typeof global?"undefined":O(global))&&global?global:"undefined"!=typeof window?window:{},(w=y.DeepDiff)&&k.push((function(){void 0!==w&&y.DeepDiff===l&&(y.DeepDiff=w,w=void 0)})),t(n,r),t(o,r),t(a,r),t(i,r),Object.defineProperties(l,{diff:{value:l,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(e,t,r){e&&t&&c(e,t,(function(n){r&&!r(e,t,n)||f(e,t,n)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,o,a=e;for(o=r.path.length-1,n=0;n<o;n++)void 0===a[r.path[n]]&&(a[r.path[n]]={}),a=a[r.path[n]];switch(r.kind){case"A":d(a[r.path[n]],r.index,r.item);break;case"D":case"E":a[r.path[n]]=r.lhs;break;case"N":delete a[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==w},enumerable:!0},noConflict:{value:function(){return k&&(k.forEach((function(e){e()})),k=null),l},enumerable:!0}});var A={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},P={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?b()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=P,e.createLogger=b,e.logger=_,e.default=_,Object.defineProperty(e,"__esModule",{value:!0})}(t)},96:e=>{"use strict";e.exports=require("bcrypt")},185:e=>{"use strict";e.exports=require("mongoose")},965:e=>{"use strict";e.exports=require("object-assign")},561:e=>{"use strict";e.exports=require("vary")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("dotenv"),t=require("express");var n=r.n(t);const o=require("express-session");var a=r.n(o);const i=require("express-rate-limit");var s=r.n(i);const u=require("react");var c=r.n(u);const l=require("react-router-config");var p=r(846),f=r.n(p);(0,e.config)();const d={port:process.env.PORT||4040,mongoUrl:process.env.MONGO_URL||"mongodb://localhost:27017/blogApi",host:process.env.HOST||"localhost"},g=require("@babel/runtime/helpers/asyncToGenerator");var h=r.n(g);const m=require("@babel/runtime/regenerator");var v=r.n(m),b=r(185),y=r.n(b);const w=require("winston");var E=r.n(w);const x=E().createLogger({levels:E().config.npm.levels,transports:[new(E().transports.File)({level:"info",filename:"./logs/app.log",handleExceptions:!0,json:!0,maxSize:5242880,maxFiles:5,colorize:!1}),new(E().transports.Console)({level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1}),j=function(){var e=h()(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().connect(t||"mongodb://localhost:27017");case 3:e.sent,x.info("  Database connection was successfully established"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),O=require("passport");var S=r.n(O);const k=require("passport-local");var A=r(185),P=A.Schema,_=A.model,D=r(96),q=D.hash,T=D.compare,C=new P({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0}});C.pre("save",function(){var e=h()(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(this.password,10);case 2:r=e.sent,this.password=r,t();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),C.methods.verifyPassword=function(){var e=h()(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,this.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();const I=_("User",C),L=require("passport-jwt"),B=require("morgan");var N=r.n(B);const R=require("morgan-json");var F=r.n(R)()({method:":method",url:":url",status:":status",contentLength:":res[content-length]",responseTime:":response-time"});const H=N()(F,{stream:{write:function(e){var t=JSON.parse(e),r=t.method,n=t.url,o=t.status,a=t.contentLength,i=t.responseTime;x.info("HTTP Access Log",{timestamp:(new Date).toString(),method:r,url:n,status:Number(o),contentLength:a,responseTime:Number(i)})}}}),M=require("react-dom/server"),U=require("react-router-dom"),G=require("react-redux"),z=require("serialize-javascript");var J=r.n(z);const W=require("@babel/runtime/helpers/defineProperty");var Y=r.n(W);const V=function(){return c().createElement("nav",null,c().createElement("h4",null,"Blog API")," ",c().createElement("ul",null," ",c().createElement("li",null,c().createElement(U.Link,{to:"/"},"Home"))," ",c().createElement("li",null,c().createElement(U.Link,{to:"/pages/blogs"},"Blogs"))," ",c().createElement("li",null,c().createElement(U.Link,{to:"/pages/signup"},"Signup"))," ",c().createElement("li",null,c().createElement(U.Link,{to:"/pages/login"},"Login"))," ",c().createElement("li",null,c().createElement(U.Link,{to:"/pages/new-blog"},"Add Blog"))," ")," ")},$=function(){return c().createElement("footer",null,c().createElement("p",null,"App Made With Love By darkcode__"))},K={component:function(e){var t=e.route;return c().createElement("div",null,c().createElement(V,null),(0,l.renderRoutes)(t.routes),c().createElement($,null))}};var Z={component:function(){return c().createElement("section",{id:"home-section"},c().createElement("h2",null,"Welcome To The Blog API Project"),c().createElement("ul",null,c().createElement("li",null,c().createElement(U.Link,{to:"/pages/login"},"Login or register to post new blog")),c().createElement("li",null,c().createElement(U.Link,{to:"/pages/blogs"},"View all published blogs")))," ")},loadData:function(){console.log("Hello From The Home Page")}};const Q=require("@babel/runtime/helpers/slicedToArray");var X=r.n(Q);const ee=require("axios");var te=r.n(ee),re="SIGN_UP_USER",ne="LOGIN_USER";function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ie={component:function(){var e=(0,u.useState)({first_name:"",last_name:"",email:"",password:""}),t=X()(e,2),r=t[0],n=t[1],o=(0,U.useHistory)(),a=(0,G.useDispatch)(),i=function(e){var t=e.target,r=t.name,o=t.value;n((function(e){return ae(ae({},e),{},Y()({},r,o))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Register To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),a((t=r,function(){var e=h()(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/auth/signup",t);case 3:n=e.sent,o=n.data,r({type:re,payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),n({first_name:"",last_name:"",email:"",password:""}),o.push("/")}},c().createElement("div",null,c().createElement("input",{id:"first_name",placeholder:"Enter Your First Name",name:"first_name",onChange:i,value:r.first_name})),c().createElement("div",null,c().createElement("input",{id:"last_name",placeholder:"Enter Your Last Name",name:"last_name",onChange:i,value:r.last_name})),c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",onChange:i,value:r.email})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:i})),c().createElement("button",{type:"submit"},"Register")))},loadData:function(){console.log("Hello From The Signup Page.")}};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ce={component:function(){var e=(0,u.useState)({email:"",password:""}),t=X()(e,2),r=t[0],n=t[1],o=(0,U.useHistory)(),a=(0,G.useDispatch)(),i=function(e){var t=e.target,r=t.name,o=t.value;n((function(e){return ue(ue({},e),{},Y()({},r,o))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Login To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),a((t=r,function(){var e=h()(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/auth/login",t);case 3:n=e.sent,o=n.data,console.log("Login User Action: ",o),r({type:ne,payload:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),n({email:"",password:""}),o.push("/")}},c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",value:r.email,onChange:i})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:i})),c().createElement("button",{type:"submit"},"Login")))},loadData:function(){console.log("Hello From The Login Page")}};var le="GET_ALL_BLOGS",pe="GET_SINGLE_BLOG",fe="POST_A_BLOG",de=function(){return function(){var e=h()(v().mark((function e(t){var r,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().get("https://blog-api-project-v2.onrender.com/api/blogs");case 3:r=e.sent,n=r.data,t((o=n.results,{type:le,payload:o})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var o}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},ge=function(e){return function(){var t=h()(v().mark((function t(r){var n,o;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te().get("https://blog-api-project-v2.onrender.com/api/blogs/".concat(e));case 3:n=t.sent,o=n.data,r({type:pe,payload:o}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};function he(e){return new Date(e).toLocaleDateString("US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}const me={component:function(){var e=(0,G.useDispatch)();(0,u.useEffect)((function(){e(de())}),[]);var t=(0,G.useSelector)((function(e){return e})).blogs;return c().createElement("div",{id:"blogs-main"},c().createElement("h2",null,"All Published Blogs"),c().createElement("ul",null,t.reverse().map((function(e){return c().createElement("li",{key:e._id},c().createElement("h4",null,e.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,he(e.createdAt)),c().createElement("span",null,e.author)),c().createElement("p",null,e.description),c().createElement(U.Link,{to:"/pages/blogs/".concat(e._id)},"Read More..."))}))))},loadData:function(e){e.dispatch(de())}},ve={component:function(){var e=(0,U.useParams)().blogId,t=(0,G.useDispatch)();(0,u.useEffect)((function(){t(ge(e))}),[]);var r=(0,G.useSelector)((function(e){return e})).blog;return c().createElement("div",{id:"blog-main"},c().createElement("h4",null,r.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,he(r.createdAt)),c().createElement("span",null,r.author)),c().createElement("p",null,r.description),c().createElement("p",null,r.body))},loadData:function(e,t){e.dispatch(ge(t))}},be=require("react-router"),ye=require("@babel/runtime/helpers/extends");var we=r.n(ye);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const je={component:(Oe=function(e){var t=(0,G.useDispatch)(),r=(0,be.useHistory)(),n=(0,u.useState)({title:"",description:"",tags:"",body:"",author:""}),o=X()(n,2),a=o[0],i=o[1],s=function(e){var t=e.target,r=t.name,n=t.value;i((function(e){return xe(xe({},e),{},Y()({},r,n))}))};return c().createElement("div",{id:"newblog-main"},c().createElement("h2",null,"Post A New Blog"),c().createElement("form",{onSubmit:function(n){var o,s;n.preventDefault(),t((o=a,s=e.token,function(){var e=h()(v().mark((function e(t){var r,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/blogs/?blog_token=".concat(s),o);case 3:r=e.sent,n=r.data,t({type:fe,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),i({title:"",description:"",tags:"",body:"",author:""}),r.push("/pages/blogs")}},c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Title",name:"title",required:!0,value:a.title,onChange:s})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Description",name:"description",required:!0,value:a.description,onChange:s})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter The Name Of The Author If Not You",name:"author",value:a.author,onChange:s})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter A Comma Separated Blog Tags If Any",name:"tags",value:a.tags,onChange:s})),c().createElement("div",{className:"textarea"},c().createElement("textarea",{placeholder:"Blog Entries here",name:"body",required:!0,value:a.body,onChange:s})),c().createElement("button",{type:"submit"},"Add Blog")))},function(e){var t=(0,G.useSelector)((function(e){return e})).user.token;return t?c().createElement(Oe,we()({token:t},e)):c().createElement(U.Redirect,{to:"/pages/login"})})};var Oe;const Se={component:function(e){var t=e.staticContext,r=void 0===t?{}:t;return r.notFound=!0,console.log("Not found page: ".concat(JSON.stringify(r))),c().createElement("div",{id:"notFound-main"},c().createElement("h2",null,"404"),c().createElement("p",null,"Sorry, page not found."),c().createElement(U.Link,{to:"/"},"Back Home"))}};function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=[Ae(Ae({},K),{},{routes:[Ae({path:"/",exact:!0},Z),Ae({path:"/pages/signup"},ie),Ae({path:"/pages/login"},ce),Ae(Ae({path:"/pages/blogs"},me),{},{exact:!0}),Ae(Ae({path:"/pages/new-blog"},je),{},{exact:!0}),Ae({path:"/pages/blogs/:blogId"},ve),Ae({},Se)]})];const _e=require("jsonwebtoken");var De=function(e,t){var r={_id:e.user._id,email:e.user.email,last_name:e.user.last_name,first_name:e.user.first_name},n=(0,_e.sign)(r,process.env.JWT_SECRET,{expiresIn:"1h"});return t.status(201).json({loggedIn:!0,profile:r,token:n})},qe=function(e,t,r){var n=r.err,o=r.user;if(r.info,n)return x.info(n),t.status(500).json(n);e.login(o,{session:!0},function(){var r=h()(v().mark((function r(n){var a,i;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return log(n),r.abrupt("return",t.status(500).json(n));case 3:return a={_id:e.user._id,email:o.email,last_name:o.last_name,first_name:o.first_name},i=(0,_e.sign)(a,process.env.JWT_SECRET,{expiresIn:"1h"}),r.abrupt("return",t.status(200).json({loggedIn:!0,profile:a,token:i}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())};const Te=require("joi");var Ce=r.n(Te),Ie=Ce().object({first_name:Ce().string().min(2).required(),last_name:Ce().string().min(2).required(),email:Ce().string().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),password:Ce().string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),Le=function(){var e=h()(v().mark((function e(t,r,n){var o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.validateAsync(t.body);case 3:o=e.sent,x.info(o),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x.info(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Be=De,Ne=qe;const Re=require("paginate-middleware");var Fe=r.n(Re),He=r(774),Me=r.n(He);function Ue(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze,Je,We,Ye,Ve,$e,Ke,Ze={getAllPublishedBlogs:(Ve=h()(v().mark((function e(t,r){var n,o,a,i,s,u,c,l,p,f,d,g,h,m,b,y,w,E,j,O;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t.query,o=n.page,a=void 0===o?1:o,i=n.limit,s=void 0===i?10:i,u=n.author,c=n.title,l=n.tags,p=n.order_by,f=void 0===p?"created_at":p,d=n.order,g=void 0===d?"asc":d,h={state:"published"},u&&(h.author=u),c&&(h.title=c),l&&(h.tags={$regex:l}),m={},b=f.split(","),y=Ue(b);try{for(y.s();!(w=y.n()).done;)E=w.value,"asc"===g&&(m[E]=1),"desc"===g&&(m[E]=-1)}catch(e){y.e(e)}finally{y.f()}return e.next=12,Me().find(h).sort(m);case 12:return j=e.sent,O=Fe()(j,+a,+s),e.abrupt("return",r.status(200).json(O));case 17:return e.prev=17,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),function(e,t){return Ve.apply(this,arguments)}),postBlog:(Ye=h()(v().mark((function e(t,r){var n,o,a,i,s,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,o=n.title,a=n.description,i=n.tags,s=n.body,e.next=4,Me().create({title:o,description:a,author:t.body.author||t.user.first_name+" "+t.user.last_name,authorId:t.user._id,reading_time:"\n            ".concat(Math.ceil(s.length/265)>1?Math.ceil(s.length/265)+"Mins":Math.ceil(s.length/265)+"Min"),tags:i,body:s});case 4:return u=e.sent,e.abrupt("return",r.status(201).json(u));case 8:return e.prev=8,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e,t){return Ye.apply(this,arguments)}),getSingleBlog:(We=h()(v().mark((function e(t,r){var n,o,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Me().findOne({_id:n,state:"published"});case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 7:return o.read_count+=1,e.next=10,o.save();case 10:return e.next=12,I.findById(o.authorId);case 12:return delete(a=(a=e.sent).toJSON()).password,(i=o.toJSON()).infos={},i.infos.author=a,e.abrupt("return",r.status(200).json(i));case 21:return e.prev=21,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))),function(e,t){return We.apply(this,arguments)}),updateBlog:(Je=h()(v().mark((function e(t,r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Me().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Me().updateOne({_id:n},t.body);case 8:return o=e.sent,e.abrupt("return",r.status(200).json({updateInfo:o,message:"Blog updated successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only update your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Je.apply(this,arguments)}),deleteBlog:(ze=h()(v().mark((function e(t,r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Me().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Me().deleteOne({_id:n});case 8:return o=e.sent,e.abrupt("return",r.status(200).json({deleteInfo:o,message:"Blog Deleted successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only delete your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return ze.apply(this,arguments)})},Qe=Ce().object({title:Ce().string().min(5).max(255).required(),description:Ce().string(),author:Ce().string().optional(),authorId:Ce().string().optional(),state:Ce().string().default("draft"),tags:Ce().string().default(""),read_count:Ce().number().default(0),reading_time:Ce().string(),body:Ce().string().required()}),Xe=function(){var e=h()(v().mark((function e(t,r,n){var o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.validateAsync(t.body);case 3:o=e.sent,x.info(o),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x.error(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),et=Ze.getAllPublishedBlogs,tt=Ze.postBlog,rt=Ze.getSingleBlog,nt=Ze.updateBlog,ot=Ze.deleteBlog,at={getAuthorBlogs:(Ke=h()(v().mark((function e(t,r){var n,o,a,i,s,u,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.user._id!==t.params.authorId){e.next=12;break}return n=t.query,o=n.page,a=void 0===o?1:o,i=n.limit,s=void 0===i?10:i,u={authorId:t.user._id},t.query.state&&(u.state=t.query.state),e.next=7,Me().find(u);case 7:return c=e.sent,l=Fe()(c,+a,+s),e.abrupt("return",r.status(200).json(l));case 12:return e.abrupt("return",r.status(403).json({message:"Can only view your own list of published and draft blogs"}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Ke.apply(this,arguments)}),getAuthorBlog:($e=h()(v().mark((function e(t,r){var n,o,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params,o=n.authorId,a=n.blogId,e.prev=1,o!==t.user._id){e.next=9;break}return e.next=5,Me().findOne({_id:a,authorId:o});case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 8:return e.abrupt("return",r.status(200).json(i));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return $e.apply(this,arguments)})},it=at.getAuthorBlogs,st=at.getAuthorBlog;const ut=require("redux");r(746);const ct=require("redux-thunk");var lt=r.n(ct);const pt=require("redux-persist"),ft=require("redux-persist/lib/storage/createWebStorage");var dt=r.n(ft);const gt=require("@babel/runtime/helpers/toConsumableArray");var ht=r.n(gt),mt=(lt(),"undefined"!=typeof window?dt()("local"):{getItem:function(e){return Promise.resolve(null)},setItem:function(e,t){return Promise.resolve(t)},removeItem:function(e){return Promise.resolve()}}),vt=(0,ut.combineReducers)({blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return t.payload;case fe:return[].concat(ht()(e),[t.payload]);default:return e}},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===pe?t.payload:e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:case ne:return t.payload;default:return e}}}),bt={key:"root",storage:mt,whitelist:["user"]},yt=((0,pt.persistReducer)(bt,vt),[lt()]);(0,e.config)();var wt=n()();j(d.mongoUrl),wt.use(n().urlencoded({extended:!0})),wt.use(n().json()),wt.use(n().static("public")),wt.use(f()()),wt.use(H),wt.use(a()({secret:process.env.SESSION_SECRET,resave:!1,saveUninitialized:!1,cookie:{maxAge:216e3}})),function(e){var t;e.use(S().initialize()),e.use(S().session()),S().use("login",new k.Strategy({usernameField:"email",passwordField:"password"},function(){var e=h()(v().mark((function e(t,r,n){var o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.findOne({email:t});case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",n(null,!1,{message:"User Not Found!"}));case 6:if(o.verifyPassword(r)){e.next=8;break}return e.abrupt("return",n(null,!1,{message:"Incorrect Password"}));case 8:return e.abrupt("return",n(null,o,{message:"User Logged in successfully."}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",n(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}())),S().use("signup",new k.Strategy({usernameField:"email",passReqToCallback:!0},function(){var e=h()(v().mark((function e(t,r,n,o){var a,i,s,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.body,i=a.first_name,s=a.last_name,/(\w+)\@(\w+)\.[a-zA-Z]/g.test(r)){e.next=5;break}throw new Error("Please enter a valid email address.");case 5:return e.next=7,I.create({email:r.toLowerCase(),first_name:i,last_name:s,password:n});case 7:u=e.sent,o(null,u),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),x.info(e.t0),o(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o){return e.apply(this,arguments)}}())),t={secretOrKey:process.env.JWT_SECRET,jwtFromRequest:L.ExtractJwt.fromUrlQueryParameter("blog_token")},S().use(new L.Strategy(t,(function(e,t){try{return x.info("JWT STRATEGY: ",e),t(null,e)}catch(e){return x.info("JWT Error: => ",e),t(e)}}))),S().serializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))})),S().deserializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))}))}(wt);var Et,xt,jt,Ot=s()({windowMs:6e4,max:100,standardHeaders:!0,legacyHeaders:!1,message:"Too many requests, please try again later.",statusCode:429});wt.use("/api",Ot),wt.use("/api/auth",((Et=(0,t.Router)()).route("/signup").post(Le,S().authenticate("signup",{session:!1}),Be),Et.route("/login").post(function(){var e=h()(v().mark((function e(t,r,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S().authenticate("login",(function(e,n,o){Ne(t,r,{err:e,user:n,info:o})}))(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),Et)),wt.use("/api/blogs",((xt=(0,t.Router)()).route("/").get(et).post(Xe,S().authenticate("jwt",{session:!1}),tt),xt.route("/:blogId").get(rt).patch(S().authenticate("jwt",{session:!1}),nt).delete(S().authenticate("jwt",{session:!1}),ot),xt)),wt.use("/api/authors",((jt=(0,t.Router)()).route("/:authorId/blogs").get(S().authenticate("jwt",{session:!1}),it),jt.route("/:authorId/blogs/:blogId").get(S().authenticate("jwt",{session:!1}),st),jt)),wt.get("*",(function(e,t){var r=(0,ut.createStore)(vt,ut.applyMiddleware.apply(void 0,yt)),n=(0,l.matchRoutes)(Pe,e.path).map((function(t){var n=t.route;return n.loadData?n.loadData(r,e.path.split("/")[3]):null})).map((function(e){if(e)return new Promise((function(t,r){e.then(t).catch(t)}))}));Promise.all(n).then((function(){var n={};x.info("Server Root App Store Get State: ",r.getState());var o=function(e,t,r){var n=(0,M.renderToString)(c().createElement(G.Provider,{store:t},c().createElement(U.StaticRouter,{location:e.url,context:r},c().createElement("div",null,(0,l.renderRoutes)(Pe)))));return'\n  <!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="stylesheet" href="/styles.css">\n\n  </head>\n  <body>\n    <div id="root">'.concat(n,"</div>\n\n\n    \n    <script>\n   window.INITIAL_STATE = ").concat(J()(t.getState()),'\n<\/script>\n    <script src="/viewsBundle.js"><\/script>\n  </body>\n</html>\n')}(e,r,n);return n.url?t.redirect(301,n.url):(n.notFound&&t.status(404),t.send(o))}))})),wt.listen(d.port,d.host,(function(){return x.info("Server is Running on host: ".concat(d.host," and on port: ").concat(d.port))}))})()})();
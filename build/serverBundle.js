(()=>{var e={774:(e,t,r)=>{var n=r(185),a=n.Schema,o=n.model,s=new a({title:{type:String,unique:!0,requred:!0},description:String,author:String,authorId:String,state:{type:String,default:"draft",enum:["published","draft"]},tags:{type:String,default:""},read_count:{type:Number,default:0},reading_time:String,body:{type:String,required:!0}},{timestamps:!0});e.exports=o("Blog",s)},746:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function i(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=void 0===e?"undefined":O(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,r,l,p,f,d){d=d||[];var g=(p=p||[]).slice(0);if(void 0!==f){if(l){if("function"==typeof l&&l(g,f))return;if("object"===(void 0===l?"undefined":O(l))){if(l.prefilter&&l.prefilter(g,f))return;if(l.normalize){var m=l.normalize(g,f,e,t);m&&(e=m[0],t=m[1])}}}g.push(f)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var h=void 0===e?"undefined":O(e),v=void 0===t?"undefined":O(t),b="undefined"!==h||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(f),y="undefined"!==v||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(f);if(!b&&y)r(new a(g,t));else if(!y&&b)r(new o(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if("date"===u(e)&&e-t!=0)r(new n(g,e,t));else if("object"===h&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&r(new n(g,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?r(new s(g,w,new o(void 0,e[w]))):c(e[w],t[w],r,l,g,w,d);for(;w<t.length;)r(new s(g,w,new a(void 0,t[w++])))}else{var E=Object.keys(e),x=Object.keys(t);E.forEach((function(n,a){var o=x.indexOf(n);o>=0?(c(e[n],t[n],r,l,g,n,d),x=i(x,o)):c(e[n],void 0,r,l,g,n,d)})),x.forEach((function(e){c(void 0,t[e],r,l,g,e,d)}))}d.length=d.length-1}else e!==t&&("number"===h&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function l(e,t,r,n){return n=n||[],c(e,t,(function(e){e&&n.push(e)}),r),n.length?n:void 0}function p(e,t,r){if(r.path&&r.path.length){var n,a=e[t],o=r.path.length-1;for(n=0;n<o;n++)a=a[r.path[n]];switch(r.kind){case"A":p(a[r.path[n]],r.index,r.item);break;case"D":delete a[r.path[n]];break;case"E":case"N":a[r.path[n]]=r.rhs}}else switch(r.kind){case"A":p(e[t],r.index,r.item);break;case"D":e=i(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,a=-1,o=r.path?r.path.length-1:0;++a<o;)void 0===n[r.path[a]]&&(n[r.path[a]]="number"==typeof r.path[a]?[]:{}),n=n[r.path[a]];switch(r.kind){case"A":p(r.path?n[r.path[a]]:n,r.index,r.item);break;case"D":delete n[r.path[a]];break;case"E":case"N":n[r.path[a]]=r.rhs}}}function d(e,t,r){if(r.path&&r.path.length){var n,a=e[t],o=r.path.length-1;for(n=0;n<o;n++)a=a[r.path[n]];switch(r.kind){case"A":d(a[r.path[n]],r.index,r.item);break;case"D":case"E":a[r.path[n]]=r.lhs;break;case"N":delete a[r.path[n]]}}else switch(r.kind){case"A":d(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=i(e,t)}return e}function g(e){return"color: "+_[e].color+"; font-weight: bold"}function m(e,t,r,n){var a=l(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}a?a.forEach((function(e){var t=e.kind,n=function(e){var t=e.kind,r=e.path,n=e.lhs,a=e.rhs,o=e.index,s=e.item;switch(t){case"E":return[r.join("."),n,"→",a];case"N":return[r.join("."),a];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+o+"]",s];default:return[]}}(e);r.log.apply(r,["%c "+_[t].text,g(t)].concat(S(n)))})):r.log("—— no diff ——");try{r.groupEnd()}catch(e){r.log("—— diff end —— ")}}function h(e,t,r,n){switch(void 0===e?"undefined":O(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,S(r)):e[n];case"function":return e(t);default:return e}}function v(e,t){var r=t.logger,n=t.actionTransformer,a=t.titleFormatter,o=void 0===a?function(e){var t=e.timestamp,r=e.duration;return function(e,n,a){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+n),r&&o.push("%c(in "+a.toFixed(2)+" ms)"),o.join(" ")}}(t):a,s=t.collapsed,i=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach((function(a,p){var f=a.started,d=a.startedTime,g=a.action,v=a.prevState,b=a.error,y=a.took,w=a.nextState,E=e[p+1];E&&(w=E.prevState,y=E.started-f);var j=n(g),O="function"==typeof s?s((function(){return w}),g,a):s,S=x(d),k=i.title?"color: "+i.title(j)+";":"",_=["color: gray; font-weight: lighter;"];_.push(k),t.timestamp&&_.push("color: gray; font-weight: lighter;"),t.duration&&_.push("color: gray; font-weight: lighter;");var P=o(j,S,y);try{O?i.title&&l?r.groupCollapsed.apply(r,["%c "+P].concat(_)):r.groupCollapsed(P):i.title&&l?r.group.apply(r,["%c "+P].concat(_)):r.group(P)}catch(e){r.log(P)}var A=h(u,j,[v],"prevState"),D=h(u,j,[j],"action"),q=h(u,j,[b,v],"error"),T=h(u,j,[w],"nextState");if(A)if(i.prevState){var I="color: "+i.prevState(v)+"; font-weight: bold";r[A]("%c prev state",I,v)}else r[A]("prev state",v);if(D)if(i.action){var B="color: "+i.action(j)+"; font-weight: bold";r[D]("%c action    ",B,j)}else r[D]("action    ",j);if(b&&q)if(i.error){var L="color: "+i.error(b,v)+"; font-weight: bold;";r[q]("%c error     ",L,b)}else r[q]("error     ",b);if(T)if(i.nextState){var N="color: "+i.nextState(w)+"; font-weight: bold";r[T]("%c next state",N,w)}else r[T]("next state",w);c&&m(v,w,r,O);try{r.groupEnd()}catch(e){r.log("—— log end ——")}}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},P,e),r=t.logger,n=t.stateTransformer,a=t.errorTransformer,o=t.predicate,s=t.logErrors,i=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(c){if("function"==typeof o&&!o(r,c))return e(c);var l={};u.push(l),l.started=j.now(),l.startedTime=new Date,l.prevState=n(r()),l.action=c;var p=void 0;if(s)try{p=e(c)}catch(e){l.error=a(e)}else p=e(c);l.took=j.now()-l.started,l.nextState=n(r());var f=t.diff&&"function"==typeof i?i(r,c):t.diff;if(v(u,Object.assign({},t,{diff:f})),u.length=0,l.error)throw l.error;return p}}}}var y,w,E=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},x=function(e){return E(e.getHours(),2)+":"+E(e.getMinutes(),2)+":"+E(e.getSeconds(),2)+"."+E(e.getMilliseconds(),3)},j="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},k=[];y="object"===("undefined"==typeof global?"undefined":O(global))&&global?global:"undefined"!=typeof window?window:{},(w=y.DeepDiff)&&k.push((function(){void 0!==w&&y.DeepDiff===l&&(y.DeepDiff=w,w=void 0)})),t(n,r),t(a,r),t(o,r),t(s,r),Object.defineProperties(l,{diff:{value:l,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(e,t,r){e&&t&&c(e,t,(function(n){r&&!r(e,t,n)||f(e,t,n)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,a,o=e;for(a=r.path.length-1,n=0;n<a;n++)void 0===o[r.path[n]]&&(o[r.path[n]]={}),o=o[r.path[n]];switch(r.kind){case"A":d(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==w},enumerable:!0},noConflict:{value:function(){return k&&(k.forEach((function(e){e()})),k=null),l},enumerable:!0}});var _={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},P={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?b()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=P,e.createLogger=b,e.logger=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},96:e=>{"use strict";e.exports=require("bcrypt")},185:e=>{"use strict";e.exports=require("mongoose")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("dotenv"),t=require("express");var n=r.n(t);const a=require("express-session");var o=r.n(a);const s=require("express-rate-limit");var i=r.n(s);const u=require("react");var c=r.n(u);const l=require("react-router-config"),p=require("cors");var f=r.n(p);(0,e.config)();const d={port:process.env.PORT||4040,mongoUrl:process.env.MONGO_URL||"mongodb://localhost:27017/blogApi",host:process.env.HOST||"localhost"},g=require("@babel/runtime/helpers/asyncToGenerator");var m=r.n(g);const h=require("@babel/runtime/regenerator");var v=r.n(h),b=r(185),y=r.n(b);const w=require("winston");var E=r.n(w);const x=E().createLogger({levels:E().config.npm.levels,transports:[new(E().transports.File)({level:"info",filename:"./logs/app.log",handleExceptions:!0,json:!0,maxSize:5242880,maxFiles:5,colorize:!1}),new(E().transports.Console)({level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1}),j=function(){var e=m()(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().connect(t||"mongodb://localhost:27017");case 3:e.sent,x.info("  Database connection was successfully established"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),O=require("passport");var S=r.n(O);const k=require("passport-local");var _=r(185),P=_.Schema,A=_.model,D=r(96),q=D.hash,T=D.compare,I=new P({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0}});I.pre("save",function(){var e=m()(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(this.password,10);case 2:r=e.sent,this.password=r,t();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),I.methods.verifyPassword=function(){var e=m()(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,this.password);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();const B=A("User",I),L=require("passport-jwt"),N=require("morgan");var C=r.n(N);const R=require("morgan-json");var F=r.n(R)()({method:":method",url:":url",status:":status",contentLength:":res[content-length]",responseTime:":response-time"});const M=C()(F,{stream:{write:function(e){var t=JSON.parse(e),r=t.method,n=t.url,a=t.status,o=t.contentLength,s=t.responseTime;x.info("HTTP Access Log",{timestamp:(new Date).toString(),method:r,url:n,status:Number(a),contentLength:o,responseTime:Number(s)})}}}),U=require("react-dom/server"),G=require("react-router-dom"),H=require("react-redux"),z=require("serialize-javascript");var J=r.n(z);const W=require("@babel/runtime/helpers/defineProperty");var Y=r.n(W);const $=function(){return c().createElement("nav",null,c().createElement("h4",null,"Blog API")," ",c().createElement("ul",null," ",c().createElement("li",null,c().createElement(G.Link,{to:"/"},"Home"))," ",c().createElement("li",null,c().createElement(G.Link,{to:"/pages/blogs"},"Blogs"))," ",c().createElement("li",null,c().createElement(G.Link,{to:"/pages/signup"},"Signup"))," ",c().createElement("li",null,c().createElement(G.Link,{to:"/pages/login"},"Login"))," ",c().createElement("li",null,c().createElement(G.Link,{to:"/pages/new-blog"},"Add Blog"))," ")," ")},K=function(){return c().createElement("footer",null,c().createElement("p",null,"App Made With Love By darkcode__"))},Z={component:function(e){var t=e.route;return c().createElement("div",null,c().createElement($,null),(0,l.renderRoutes)(t.routes),c().createElement(K,null))}};var Q={component:function(){return c().createElement("section",{id:"home-section"},c().createElement("h2",null,"Welcome To The Blog API Project"),c().createElement("ul",null,c().createElement("li",null,c().createElement(G.Link,{to:"/pages/login"},"Login or register to post new blog")),c().createElement("li",null,c().createElement(G.Link,{to:"/pages/blogs"},"View all published blogs")))," ")},loadData:function(){console.log("Hello From The Home Page")}};const V=require("@babel/runtime/helpers/slicedToArray");var X=r.n(V);const ee=require("axios");var te=r.n(ee),re="SIGN_UP_USER",ne="LOGIN_USER";function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const se={component:function(){var e=(0,u.useState)({first_name:"",last_name:"",email:"",password:""}),t=X()(e,2),r=t[0],n=t[1],a=(0,G.useHistory)(),o=(0,H.useDispatch)(),s=function(e){var t=e.target,r=t.name,a=t.value;n((function(e){return oe(oe({},e),{},Y()({},r,a))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Register To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),o((t=r,function(){var e=m()(v().mark((function e(r){var n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/auth/signup",t);case 3:n=e.sent,a=n.data,r({type:re,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),n({first_name:"",last_name:"",email:"",password:""}),a.push("/")}},c().createElement("div",null,c().createElement("input",{id:"first_name",placeholder:"Enter Your First Name",name:"first_name",onChange:s,value:r.first_name})),c().createElement("div",null,c().createElement("input",{id:"last_name",placeholder:"Enter Your Last Name",name:"last_name",onChange:s,value:r.last_name})),c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",onChange:s,value:r.email})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:s})),c().createElement("button",{type:"submit"},"Register")))}};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ce={component:function(){var e=(0,u.useState)({email:"",password:""}),t=X()(e,2),r=t[0],n=t[1],a=(0,G.useHistory)(),o=(0,H.useDispatch)(),s=function(e){var t=e.target,r=t.name,a=t.value;n((function(e){return ue(ue({},e),{},Y()({},r,a))}))};return c().createElement("div",{id:"auth-main"},c().createElement("h2",null,"Login To Start Posting Blogs"),c().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),o((t=r,function(){var e=m()(v().mark((function e(r){var n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/auth/login",t);case 3:n=e.sent,a=n.data,r({type:ne,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),n({email:"",password:""}),a.push("/")}},c().createElement("div",null,c().createElement("input",{id:"email",type:"email",placeholder:"Enter your email address",name:"email",value:r.email,onChange:s})),c().createElement("div",null,c().createElement("input",{id:"password",type:"password",placeholder:"Enter your password",name:"password",value:r.password,onChange:s})),c().createElement("button",{type:"submit"},"Login")))}};var le="GET_ALL_BLOGS",pe="GET_SINGLE_BLOG",fe="POST_A_BLOG",de=function(){return function(){var e=m()(v().mark((function e(t){var r,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().get("https://blog-api-project-v2.onrender.com/api/blogs");case 3:r=e.sent,n=r.data,t((a=n.results,{type:le,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var a}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},ge=function(e){return function(){var t=m()(v().mark((function t(r){var n,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te().get("https://blog-api-project-v2.onrender.com/api/blogs/".concat(e));case 3:n=t.sent,a=n.data,r({type:pe,payload:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};function me(e){return new Date(e).toLocaleDateString("US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}const he={component:function(){var e=(0,H.useDispatch)();(0,u.useEffect)((function(){e(de())}),[]);var t=(0,H.useSelector)((function(e){return e})).blogs;return c().createElement("div",{id:"blogs-main"},c().createElement("h2",null,"All Published Blogs"),c().createElement("ul",null,t.map((function(e){return c().createElement("li",{key:e._id},c().createElement("h4",null,e.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,me(e.createdAt)),c().createElement("span",null,e.author)),c().createElement("p",null,e.description),c().createElement(G.Link,{to:"/pages/blogs/".concat(e._id)},"Read More..."))}))))},loadData:function(e){return e.dispatch(de())}},ve={component:function(){var e=(0,G.useParams)().blogId,t=(0,H.useDispatch)();(0,u.useEffect)((function(){t(ge(e))}),[]);var r=(0,H.useSelector)((function(e){return e})).blog;return c().createElement("div",{id:"blog-main"},c().createElement("h4",null,r.title),c().createElement("div",{className:"meta-details"},c().createElement("span",null,me(r.createdAt)),c().createElement("span",null,r.author)),c().createElement("p",null,r.description),c().createElement("p",null,r.body))},loadData:function(e,t){return e.dispatch(ge(t))}},be=require("react-router"),ye=require("@babel/runtime/helpers/extends");var we=r.n(ye);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const je={component:(Oe=function(e){var t=(0,H.useDispatch)(),r=(0,be.useHistory)(),n=(0,u.useState)({title:"",description:"",tags:"",body:"",author:""}),a=X()(n,2),o=a[0],s=a[1],i=function(e){var t=e.target,r=t.name,n=t.value;s((function(e){return xe(xe({},e),{},Y()({},r,n))}))};return c().createElement("div",{id:"newblog-main"},c().createElement("h2",null,"Post A New Blog"),c().createElement("form",{onSubmit:function(n){var a,i;n.preventDefault(),t((a=o,i=e.token,function(){var e=m()(v().mark((function e(t){var r,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te().post("https://blog-api-project-v2.onrender.com/api/blogs/?blog_token=".concat(i),a);case 3:r=e.sent,n=r.data,t({type:fe,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),s({title:"",description:"",tags:"",body:"",author:""}),r.push("/pages/blogs")}},c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Title",name:"title",required:!0,value:o.title,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter Blog Description",name:"description",required:!0,value:o.description,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter The Name Of The Author If Not You",name:"author",value:o.author,onChange:i})),c().createElement("div",null,c().createElement("input",{placeholder:"Enter A Comma Separated Blog Tags If Any",name:"tags",value:o.tags,onChange:i})),c().createElement("div",{className:"textarea"},c().createElement("textarea",{placeholder:"Blog Entries here",name:"body",required:!0,value:o.body,onChange:i})),c().createElement("button",{type:"submit"},"Add Blog")))},function(e){var t=(0,H.useSelector)((function(e){return e})).user.token;return t?c().createElement(Oe,we()({token:t},e)):c().createElement(G.Redirect,{to:"/pages/login"})})};var Oe;const Se={component:function(e){var t=e.staticContext,r=void 0===t?{}:t;return r.notFound=!0,console.log("Not found page: ".concat(JSON.stringify(r))),c().createElement("div",{id:"notFound-main"},c().createElement("h2",null,"404"),c().createElement("p",null,"Sorry, page not found."),c().createElement(G.Link,{to:"/"},"Back Home"))}};function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=[_e(_e({},Z),{},{routes:[_e({path:"/",exact:!0},Q),_e({path:"/pages/signup"},se),_e({path:"/pages/login"},ce),_e(_e({path:"/pages/blogs"},he),{},{exact:!0}),_e(_e({path:"/pages/new-blog"},je),{},{exact:!0}),_e({path:"/pages/blogs/:blogId"},ve),_e({},Se)]})];const Ae=require("jsonwebtoken");var De=function(e,t){var r={_id:e.user._id,email:e.user.email,last_name:e.user.last_name,first_name:e.user.first_name},n=(0,Ae.sign)(r,process.env.JWT_SECRET,{expiresIn:"1h"});return t.status(201).json({loggedIn:!0,profile:r,token:n})},qe=function(e,t,r){var n=r.err,a=r.user;if(r.info,n)return x.info(n),t.status(500).json(n);e.login(a,{session:!0},function(){var r=m()(v().mark((function r(n){var o,s;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return log(n),r.abrupt("return",t.status(500).json(n));case 3:return o={_id:e.user._id,email:a.email,last_name:a.last_name,first_name:a.first_name},s=(0,Ae.sign)(o,process.env.JWT_SECRET,{expiresIn:"1h"}),r.abrupt("return",t.status(200).json({loggedIn:!0,profile:o,token:s}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())};const Te=require("joi");var Ie=r.n(Te),Be=Ie().object({first_name:Ie().string().min(2).required(),last_name:Ie().string().min(2).required(),email:Ie().string().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),password:Ie().string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),Le=function(){var e=m()(v().mark((function e(t,r,n){var a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.validateAsync(t.body);case 3:a=e.sent,x.info(a),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x.info(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ne=De,Ce=qe;const Re=require("paginate-middleware");var Fe=r.n(Re),Me=r(774),Ue=r.n(Me);function Ge(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze,Je,We,Ye,$e,Ke,Ze,Qe={getAllPublishedBlogs:($e=m()(v().mark((function e(t,r){var n,a,o,s,i,u,c,l,p,f,d,g,m,h,b,y,w,E,j,O;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t.query,a=n.page,o=void 0===a?1:a,s=n.limit,i=void 0===s?10:s,u=n.author,c=n.title,l=n.tags,p=n.order_by,f=void 0===p?"created_at":p,d=n.order,g=void 0===d?"asc":d,m={state:"published"},u&&(m.author=u),c&&(m.title=c),l&&(m.tags={$regex:l}),h={},b=f.split(","),y=Ge(b);try{for(y.s();!(w=y.n()).done;)E=w.value,"asc"===g&&(h[E]=1),"desc"===g&&(h[E]=-1)}catch(e){y.e(e)}finally{y.f()}return e.next=12,Ue().find(m).sort(h);case 12:return j=e.sent,O=Fe()(j,+o,+i),x.info(O),O.results=O.results.reverse(),e.abrupt("return",r.status(200).json(O));case 19:return e.prev=19,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),function(e,t){return $e.apply(this,arguments)}),postBlog:(Ye=m()(v().mark((function e(t,r){var n,a,o,s,i,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,a=n.title,o=n.description,s=n.tags,i=n.body,e.next=4,Ue().create({title:a,description:o,author:t.body.author||t.user.first_name+" "+t.user.last_name,authorId:t.user._id,reading_time:"\n            ".concat(Math.ceil(i.length/265)>1?Math.ceil(i.length/265)+"Mins":Math.ceil(i.length/265)+"Min"),tags:s,body:i});case 4:return u=e.sent,e.abrupt("return",r.status(201).json(u));case 8:return e.prev=8,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e,t){return Ye.apply(this,arguments)}),getSingleBlog:(We=m()(v().mark((function e(t,r){var n,a,o,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Ue().findOne({_id:n,state:"published"});case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 7:return a.read_count+=1,e.next=10,a.save();case 10:return e.next=12,B.findById(a.authorId);case 12:return delete(o=(o=e.sent).toJSON()).password,(s=a.toJSON()).infos={},s.infos.author=o,e.abrupt("return",r.status(200).json(s));case 21:return e.prev=21,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,21]])}))),function(e,t){return We.apply(this,arguments)}),updateBlog:(Je=m()(v().mark((function e(t,r){var n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Ue().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Ue().updateOne({_id:n},t.body);case 8:return a=e.sent,e.abrupt("return",r.status(200).json({updateInfo:a,message:"Blog updated successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only update your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Je.apply(this,arguments)}),deleteBlog:(ze=m()(v().mark((function e(t,r){var n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.blogId,e.next=4,Ue().findById(n);case 4:if(e.sent.authorId!==t.user._id){e.next=12;break}return e.next=8,Ue().deleteOne({_id:n});case 8:return a=e.sent,e.abrupt("return",r.status(200).json({deleteInfo:a,message:"Blog Deleted successfully."}));case 12:return e.abrupt("return",r.status(403).json({message:"You can only delete your blog."}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return ze.apply(this,arguments)})},Ve=Ie().object({title:Ie().string().min(5).max(255).required(),description:Ie().string(),author:Ie().string().optional(),authorId:Ie().string().optional(),state:Ie().string().default("draft"),tags:Ie().string().default(""),read_count:Ie().number().default(0),reading_time:Ie().string(),body:Ie().string().required()}),Xe=function(){var e=m()(v().mark((function e(t,r,n){var a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ve.validateAsync(t.body);case 3:a=e.sent,x.info(a),n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),x.error(e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),et=Qe.getAllPublishedBlogs,tt=Qe.postBlog,rt=Qe.getSingleBlog,nt=Qe.updateBlog,at=Qe.deleteBlog,ot={getAuthorBlogs:(Ze=m()(v().mark((function e(t,r){var n,a,o,s,i,u,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.user._id!==t.params.authorId){e.next=12;break}return n=t.query,a=n.page,o=void 0===a?1:a,s=n.limit,i=void 0===s?10:s,u={authorId:t.user._id},t.query.state&&(u.state=t.query.state),e.next=7,Ue().find(u);case 7:return c=e.sent,l=Fe()(c,+o,+i),e.abrupt("return",r.status(200).json(l));case 12:return e.abrupt("return",r.status(403).json({message:"Can only view your own list of published and draft blogs"}));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,t){return Ze.apply(this,arguments)}),getAuthorBlog:(Ke=m()(v().mark((function e(t,r){var n,a,o,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params,a=n.authorId,o=n.blogId,e.prev=1,a!==t.user._id){e.next=9;break}return e.next=5,Ue().findOne({_id:o,authorId:a});case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",r.status(404).json({message:"Blog not found."}));case 8:return e.abrupt("return",r.status(200).json(s));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),x.info(e.t0),e.abrupt("return",r.status(500).json(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return Ke.apply(this,arguments)})},st=ot.getAuthorBlogs,it=ot.getAuthorBlog;const ut=require("redux");r(746);const ct=require("redux-thunk");var lt=r.n(ct);const pt=require("redux-persist"),ft=require("redux-persist/lib/storage/createWebStorage");var dt=r.n(ft);const gt=require("@babel/runtime/helpers/toConsumableArray");var mt=r.n(gt),ht=(lt(),"undefined"!=typeof window?dt()("local"):{getItem:function(e){return Promise.resolve(null)},setItem:function(e,t){return Promise.resolve(t)},removeItem:function(e){return Promise.resolve()}}),vt=(0,ut.combineReducers)({blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return t.payload;case fe:return[].concat(mt()(e),[t.payload]);default:return e}},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===pe?t.payload:e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:case ne:return t.payload;default:return e}}}),bt={key:"root",storage:ht,whitelist:["user"]};(0,pt.persistReducer)(bt,vt);const yt=vt;var wt=[lt()];(0,e.config)();var Et=n()();j(d.mongoUrl),Et.use(n().urlencoded({extended:!0})),Et.use(n().json()),Et.use(n().static("public")),Et.use(f()()),Et.use(M),Et.use(o()({secret:process.env.SESSION_SECRET,resave:!1,saveUninitialized:!1,cookie:{maxAge:216e3}})),function(e){var t;e.use(S().initialize()),e.use(S().session()),S().use("login",new k.Strategy({usernameField:"email",passwordField:"password"},function(){var e=m()(v().mark((function e(t,r,n){var a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.findOne({email:t});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return",n(null,!1,{message:"User Not Found!"}));case 6:if(a.verifyPassword(r)){e.next=8;break}return e.abrupt("return",n(null,!1,{message:"Incorrect Password"}));case 8:return e.abrupt("return",n(null,a,{message:"User Logged in successfully."}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",n(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}())),S().use("signup",new k.Strategy({usernameField:"email",passReqToCallback:!0},function(){var e=m()(v().mark((function e(t,r,n,a){var o,s,i,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=t.body,s=o.first_name,i=o.last_name,/(\w+)\@(\w+)\.[a-zA-Z]/g.test(r)){e.next=5;break}throw new Error("Please enter a valid email address.");case 5:return e.next=7,B.create({email:r.toLowerCase(),first_name:s,last_name:i,password:n});case 7:u=e.sent,a(null,u),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),x.info(e.t0),a(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}())),t={secretOrKey:process.env.JWT_SECRET,jwtFromRequest:L.ExtractJwt.fromUrlQueryParameter("blog_token")},S().use(new L.Strategy(t,(function(e,t){try{return x.info("JWT STRATEGY: ",e),t(null,e)}catch(e){return x.info("JWT Error: => ",e),t(e)}}))),S().serializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))})),S().deserializeUser((function(e,t){process.nextTick((function(){return t(null,e)}))}))}(Et);var xt,jt,Ot,St=i()({windowMs:6e4,max:100,standardHeaders:!0,legacyHeaders:!1,message:"Too many requests, please try again later.",statusCode:429});Et.use("/api",St),Et.use("/api/auth",((xt=(0,t.Router)()).route("/signup").post(Le,S().authenticate("signup",{session:!1}),Ne),xt.route("/login").post(function(){var e=m()(v().mark((function e(t,r,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S().authenticate("login",(function(e,n,a){Ce(t,r,{err:e,user:n,info:a})}))(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),xt)),Et.use("/api/blogs",((jt=(0,t.Router)()).route("/").get(et).post(Xe,S().authenticate("jwt",{session:!1}),tt),jt.route("/:blogId").get(rt).patch(S().authenticate("jwt",{session:!1}),nt).delete(S().authenticate("jwt",{session:!1}),at),jt)),Et.use("/api/authors",((Ot=(0,t.Router)()).route("/:authorId/blogs").get(S().authenticate("jwt",{session:!1}),st),Ot.route("/:authorId/blogs/:blogId").get(S().authenticate("jwt",{session:!1}),it),Ot)),Et.get("*",(function(e,t){var r=(0,ut.createStore)(yt,{},ut.applyMiddleware.apply(void 0,wt)),n=(0,l.matchRoutes)(Pe,e.path).map((function(t){var n=t.route;return n.loadData?n.loadData(r,e.path.split("/")[3]):null})).map((function(e){if(e)return new Promise((function(t,r){e.then(t).catch(t)}))}));Promise.all(n).then((function(){var n={};x.info("Server Root App Store Get State: ",r.getState());var a=function(e,t,r){var n=(0,U.renderToString)(c().createElement(H.Provider,{store:t},c().createElement(G.StaticRouter,{location:e.url,context:r},c().createElement("div",null,(0,l.renderRoutes)(Pe)))));return x.info("Store before rendering: ",t.getState()),'\n  <!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="stylesheet" href="/styles.css">\n\n  </head>\n  <body>\n    <div id="root">'.concat(n,"</div>\n\n    <script>\n       window.INITIAL_STATE = ").concat(J()(t.getState()),'\n    <\/script>\n\n    <script src="/viewsBundle.js"><\/script>\n  </body>\n</html>\n')}(e,r,n);return n.url?t.redirect(301,n.url):(n.notFound&&t.status(404),t.send(a))}))})),Et.listen(d.port,d.host,(function(){return x.info("Server is Running on host: ".concat(d.host," and on port: ").concat(d.port))}))})()})();